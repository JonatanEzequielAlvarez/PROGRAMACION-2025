<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Get API</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Lato%7CQuestrial%7CRoboto+Condensed&display=swap"
        rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Lato%7CQuestrial&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Special+Elite&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Oswald%7CSpecial+Elite&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Questrial&display=swap" rel="stylesheet">
    <link href='https://fonts.googleapis.com/css?family=Roboto' rel='stylesheet' type='text/css'>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!-- SweetAlert2 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/limonte-sweetalert2/7.2.0/sweetalert2.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/limonte-sweetalert2/7.2.0/sweetalert2.all.min.js"></script>
</head>

<body>


    <h1>GET API</h1>



    <div id="contenedor" style="text-align: center;">

    </div>




    <!-- Detalles:
mode: 'cors'

Esto indica que la petición debe seguir las reglas de CORS (Cross-Origin Resource Sharing).

Se usa cuando estás haciendo una solicitud a un dominio diferente (por ejemplo, desde tusitio.com a api.otrodominio.com).

Permite el intercambio de recursos entre diferentes orígenes, siempre que el servidor lo permita.

method: "GET"

Indica que el método HTTP usado será GET, que se usa para solicitar datos (por ejemplo, obtener datos de una API).

Es el método más común para solo leer datos sin modificar nada en el servidor.

redirect: 'follow'

Esto le dice al navegador que siga automáticamente cualquier redirección que ocurra durante la solicitud.

Por ejemplo, si la URL original responde con un código 301 o 302 para redirigir a otra URL, la solicitud continuará hacia esa nueva URL. -->







    <script>

        var requestOptions = {
            mode: 'cors',
            method: "GET",
            redirect: 'follow'
        }

        fetch('https://creardev.com.ar/instituto/fetch_get', requestOptions)
            .then(response => response.json())
            .then(datos => {
                console.log(datos.status)
                console.log(datos);


                if (datos.status != 200) {
                    swal({
                        title: 'Error',
                        text: 'No se pudo obtener la información',
                        type: 'error',
                        confirmButtonText: 'Aceptar'
                    })
                } else {
                    let newElement = document.createElement("div")
                    for (i in datos.data) {
                        console.log(datos.data[i].image);
                        newElement.innerHTML += `
                        
                         <div class="card" style="width: 100%;cursor:pointer" onmousedown="alert("por arriba")">
                          <img class="card-img-top" src="${datos.data[i].image}" alt="Card image cap">
                           <div class="card-body">
                             <p class="card-text" style="font-family: 'Questrial', sans-serif;">${datos.data[i].detail}</p>
                           </div>
                           <hr>
                           <div class="card-body" style="display: flex;align-content: space-between;flex-wrap: nowrap ;justify-content: center;">
                            <div style="margin-left:20px;align-content: center" onclick="like(${datos.data[i].id})"><i class="material-icons" id="${datos.data[i].id}" style="color:black">favorite_border</i></div>
                            <span style="font-family: 'Questrial', sans-serif;" onclick="like(${datos.data[i].id})">Me Gusta <span id="cont${datos.data[i].id}">${datos.data[i].count}</span></span>
                            <div style="margin-left:20px;"><i class="material-icons" style="">chat_bubble_outline</i></div>
                            <span style="font-family: 'Questrial', sans-serif;">Comentar</span>
                            <div style="margin-left:20px"><i class="material-icons" style="">share</i></div>
                            <span style="font-family: 'Questrial', sans-serif;">Compartir</span>
                            </div>
                        </div>
                        
                            <br>
                          
                        `
                        document.getElementById("contenedor").append(newElement)

                    }
                }

            })
            .catch(error => {
                // Log any errors to the console
                console.error('Error fetching data:', error);
            });


        function like(id) {
            console.log(id)
            if (document.getElementById(id).style.color == "black") {
                document.getElementById(id).style.color = "red"
                document.getElementById("cont" + id).innerHTML = parseInt(document.getElementById("cont" + id).innerHTML) + 1
            } else if (document.getElementById(id).style.color == "red") {
                document.getElementById(id).style.color = "black"
                document.getElementById("cont" + id).innerHTML = parseInt(document.getElementById("cont" + id).innerHTML) - 1
            }
        }

    </script>



</body>

</html>